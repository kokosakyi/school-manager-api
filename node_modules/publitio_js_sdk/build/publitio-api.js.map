{"version":3,"sources":["../src/publitio-api.js"],"names":["PublitioAPI","key","secret","version","API","VERSION","url","URL","call","method","args","Error","helper","createUrl","callApi","file","action","Object","values","ACTIONS","includes","getUrlForFileCreation","uploadFile","publitioApi"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,W;;;AACnB,uBAAaC,GAAb,EAAkBC,MAAlB,EAA0B;AAAA;;AACxB,SAAKC,OAAL,GAAeC,eAAIC,OAAnB;AACA,SAAKC,GAAL,GAAWF,eAAIG,GAAf;AACA,SAAKN,GAAL,GAAWA,GAAX;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;;;8BAEU;AACT,aAAO,KAAKC,OAAZ;AACD;;;yBAEKK,K,EAAiC;AAAA,UAA3BC,MAA2B,uEAAlB,KAAkB;AAAA,UAAXC,IAAW,uEAAJ,EAAI;;AACrC,UAAI,OAAOF,KAAP,KAAgB,QAApB,EAA8B;AAC5B,cAAM,IAAIG,KAAJ,CAAU,0CAAV,CAAN;AACD;;AAED,UAAI,OAAOF,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,cAAM,IAAIE,KAAJ,CAAU,2CAAV,CAAN;AACD;;AAED,UAAML,GAAG,GAAGM,eAAOC,SAAP,CAAiBL,KAAjB,EAAuBE,IAAvB,EAA6B,KAAKJ,GAAlC,EAAuC,KAAKL,GAA5C,EAAiD,KAAKC,MAAtD,EAA8D,KAAKC,OAAnE,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoBG,MAApB,CAAP;AACD;;;+BAEWM,I,EAAkC;AAAA,UAA5BC,MAA4B,uEAAnB,MAAmB;AAAA,UAAXN,IAAW,uEAAJ,EAAI;;AAC5C,UAAI,CAACO,MAAM,CAACC,MAAP,CAAcC,kBAAd,EAAuBC,QAAvB,CAAgCJ,MAAhC,CAAL,EAA8C;AAC5C,cAAM,IAAIL,KAAJ,yDAA2DM,MAAM,CAACC,MAAP,CAAcC,kBAAd,CAA3D,EAAN;AACD;;AAED,UAAMb,GAAG,GAAGM,eAAOS,qBAAP,CAA6BL,MAA7B,EAAqCN,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOU,UAAP,CAAkBP,IAAlB,EAAwBT,GAAxB,CAAP;AACD;;;uCAE4B;AAAA,UAAXI,IAAW,uEAAJ,EAAI;;AAC3B,UAAMJ,GAAG,GAAGM,eAAOS,qBAAP,CAA6B,MAA7B,EAAqCX,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoB,MAApB,CAAP;AACD;;;;;;;;AAGI,SAASiB,WAAT,CAAsBtB,GAAtB,EAA2BC,MAA3B,EAAmC;AACxC,SAAO,IAAIF,WAAJ,CAAgBC,GAAhB,EAAqBC,MAArB,CAAP;AACD","sourcesContent":["import { helper } from './helper'\nimport { API, ACTIONS } from './constants'\n\nexport default class PublitioAPI {\n  constructor (key, secret) {\n    this.version = API.VERSION\n    this.url = API.URL\n    this.key = key\n    this.secret = secret\n  }\n\n  version () {\n    return this.version\n  }\n\n  call (call, method = 'GET', args = {}) {\n    if (typeof call !== 'string') {\n      throw new Error('First parameter to call must be a string')\n    }\n\n    if (typeof method !== 'string') {\n      throw new Error('Second parameter to call must be a string')\n    }\n\n    const url = helper.createUrl(call, args, this.url, this.key, this.secret, this.version)\n    return helper.callApi(url, method)\n  }\n\n  uploadFile (file, action = 'file', args = {}) {\n    if (!Object.values(ACTIONS).includes(action)) {\n      throw new Error(`Second parameter to uploadFile must be one of ${Object.values(ACTIONS)}`)\n    }\n\n    const url = helper.getUrlForFileCreation(action, args, this.url, this.key, this.secret, this.version)\n    return helper.uploadFile(file, url)\n  }\n\n  uploadRemoteFile (args = {}) {\n    const url = helper.getUrlForFileCreation('file', args, this.url, this.key, this.secret, this.version)\n    return helper.callApi(url, 'POST')\n  }\n}\n\nexport function publitioApi (key, secret) {\n  return new PublitioAPI(key, secret)\n}\n"],"file":"publitio-api.js"}